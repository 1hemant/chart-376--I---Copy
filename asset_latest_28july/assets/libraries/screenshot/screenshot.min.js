/*
	Usage:
		$('body').screenshot(function(e){
			window.open(e);
			//	e	-> 		Data URL of IMAGE
		});
*/
!function(e){e.fn.screenshot=function(n){var t=this,a=[],i=[],o=t.find("svg");o.each(function(n,t){var o=t.parentNode,h=(o.innerHTML,document.createElement("canvas")),d=e(o).width(),r=e(o).height();e(h).attr({width:d,height:r}).css({width:d,height:r});var c=h.getContext("2d"),l=new Image;l.onload=function(){c.drawImage(l,0,0)},l.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent((new XMLSerializer).serializeToString(this)))),a.push({parent:o,child:t}),o.removeChild(t),i.push({parent:o,child:h}),o.appendChild(h)}),html2canvas(t,{onrendered:function(e){var t=e.getContext("2d");i.forEach(function(e){e.parent.removeChild(e.child)}),a.forEach(function(e){e.parent.appendChild(e.child)}),t.webkitImageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1,n(e.toDataURL())},allowTaint:!0})}}(jQuery);
